@import 'mixins';

html {
    font-size: 100%; // 16px
}

body {
    font: 0.8125rem/175% 'Karla', 'Helvetica Neue', Arial, Helvetica, sans-serif;
    // 13px/22.75px
}

audio, canvas, iframe, img, svg, video {
    vertical-align: middle;
}

textarea {
    resize: vertical;
}

img {
    max-width: 100%;
}

figure {
    margin: 0;
}

a {
    text-decoration: none;
}

hr {
    display: block;
    height: 1px;
    margin: 1em 0;
    padding: 0;
    border: 0;
    border-top: 1px solid #eee;
}

blockquote {
    margin: 1em 0;
    padding-left: 1em;
    border-left: 2px solid #eee;
}

ul, ol, p {
    margin: 1em 0;
}

h1, h2, h3 {
    letter-spacing: 3px;
    font-weight: normal;
    text-transform: uppercase;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}
h3 {
    font-size: 1.17em;
    margin: 1em 0;
}
h4 {
    margin: 1.33em 0;
}
h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}
h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

pre {
    word-wrap: break-word;
    white-space: pre-wrap;
}

/* ==========================================================================
   Helper classes
   ========================================================================== */

.hidden {
    display: none !important;
    visibility: hidden;
}

.clearfix:before,
.clearfix:after {
    content: " ";
    display: table;
}

.clearfix:after {
    clear: both;
}

.clearfix {
    *zoom: 1;
}

.circle, .badge, .notes .avatar {
    @include border-radius(50%);
}

.badge {
    display: inline-block;
    width: px2rem($badge-width-height);
    height: px2rem($badge-width-height);
    padding: px2rem(8px);
    line-height: px2rem(13px);
    @include border-box-sizing;

    &:before {
        font-size: px2rem(13px);
    }
}

.lightcaps,
.more_notes_link_container {
    text-transform: uppercase;
    letter-spacing: 2px;
    line-height: 100%;
}

.transitions-enabled {
    a {
        @include transition(color);
    }
    .badge {
        @include transition(background-color);
    }
    .post-date-link, .index .tag-link, .more_notes_link {
        @include transition(border-color 0.2s);
    }
    #blog-header {
        @include transition(border-bottom-color 0.4s, height);
    }
    #blog-title {
        @include transition(font-size);
    }
    #blog-description,
    #social-icons {
        @include transition(height);
    }
    #elevator {
        @include transition(background-color, bottom 0.4s, opacity 0.6s);
    }
}

/* ==========================================================================
    General Layout Styles
   ========================================================================== */

.tmblr-iframe {
    display: none;
}

#wrapper, #blog-footer {
    margin: 0 auto;
    width: 100%;
    max-width: $wrapper-max-width;
}

.permalink #wrapper {
    width: $permalink-post-width + $post-lr-padding + $post-aside-width;
    max-width: none;
}

$blog-header-height: px2rem(124px);
// 40px (padding-top) + 18px + 13px (#blog-title) + 13px (#social-icons) + 40px (padding-bottom)

#blog-header {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 10;
    width: 100%;
    height: $blog-header-height;
    padding: 40px 0;
    border-bottom: 1px solid transparent;
    @include border-box-sizing;

    &.compact {
        height: px2rem(71px);
        // 29px (padding-top) + 13px (#blog-title) + 29px (padding-bottom)
        padding: 29px 0;
    }
}

#posts-container {
    margin-top: $blog-header-height;
}

.permalink #posts-container.has-posts {
    width: $permalink-post-width;
}

/* ==============
    Progress Bar
   ============== */

#nprogress {
    pointer-events: none;

    .progress-bar {
        position: fixed;
        z-index: 1031;
        top: 0;
        left: 0;
        width: 100%;
        height: 2px;
    }
}

/* ============
    Flat Lists
   ============ */

#main-menu, #social-icons,
.chat-container, .fake-list,
.tags, .post-icons, .post-sources,
.notes, .pagination {
    list-style-type: none;
    padding: 0;
}

.menu-item, .social-item,
.play-count, .permalink .external-audio,
.submission, .via, .source,
.next, .previous, .page-number {
    display: inline-block;
}

/* =========================
    Bottom Border for Hover
   ========================= */

.post-date-link,
.index .tag-link,
.more_notes_link {
    border-bottom: 1px solid transparent;
}

/* ==========================================================================
   Header Styles
   ========================================================================== */

#header-wrapper {
    margin: 0 auto;
    max-width: $wrapper-max-width;
    position: relative;
}

#blog-title,
#blog-description,
#main-menu,
#social-icons {
    margin: 0;
    position: absolute;
    display: inline-block;
    line-height: 1em;
}

#blog-title {
    top: 0;
    left: $post-lr-padding;
    font-size: px2rem(18px);
    letter-spacing: 11px;
}

#blog-description {
    top: px2rem(26px); // 13px (#main-menu) + 13px
    right: $post-lr-padding;
    font-size: px2rem(11px);
    height: px2rem(13px);
    line-height: px2rem(13px);
}

#main-menu {
    top: 0;
    right: $post-lr-padding;
}
.menu-item {
    margin-right: px2rem(32px);
    text-transform: lowercase;
}

#social-icons {
    top: px2rem(31px); // 18px (#blog-title) + 13px
    left: $post-lr-padding;
    height: 1em;
}
.social-item {
    margin-right: px2rem(13px);
}

.menu-item:last-child,
.social-item:last-child {
    margin-right: 0;
}

.compact {
    #blog-title {
        font-size: px2rem(13px);
    }
    #blog-description,
    #social-icons {
        height: 0;
        overflow: hidden;
    }
}

/* ==========================================================================
    Main Styles
   ========================================================================== */

.results-title {
    margin: 0 $post-lr-padding 20px;
    font-size: px2rem(12px);
    text-transform: lowercase;
    letter-spacing: normal;

    &:before {
        vertical-align: middle;
        margin-right: 3px;
    }

    .the-query {
        font-style: normal;
        font-weight: bold;
        letter-spacing: 1px;
    }
}

.index .post, #grid-sizer {
    width: 50%;
    max-width: $post-max-width;
    min-width: $post-min-width;
    padding: 0 $post-lr-padding;
    @include border-box-sizing;
}

.index .post {
    margin-bottom: 40px;
    float: left;
}

.permalink .post {
    margin-bottom: 20px;
}

.post-content {
    padding-bottom: 1em;
    @include border-radius(4px);
}

.type-quote .post-content,
.type-answer .post-content {
    padding-top: 1em;
}

// I think I'll cheat instead of resetting all the top margins...
.type-text .post-content,
.type-chat .post-content {
    padding-top: 1px;
}

/* ===========
    The Posts
   =========== */

.post iframe {
    max-width: 100%;
}

.post-title {
    margin: 0.8125rem; // 13px
    line-height: 115%;
}
.link-name, .chat-title {
    font-size: 1.438rem; // 23px
}

.post-title-link:after {
    vertical-align: bottom;
    opacity: 0;
    //@include transition(opacity);
}
.post-title-link:hover:after {
    opacity: 1;
}

.post-body {
    margin: 0 1em;
}

// .post-body small {
//     line-height: 100%;
// }
//
// .post-body small,
// .post-body i,
// .post-body em,
// .post-body cite,
// .post-body code,
// .post-body pre {
//     font-size: 0.6875rem; // 11px
// }
//
// .post-body small small,
// .post-body small i,
// .post-body small em,
// .post-body small cite,
// .post-body small code,
// .post-body small pre {
//     font-size: 0.5625rem; // 9px
// }

.post-body figure {
    margin: 1em 0;
}

/* tumblr gif styles */
.tmblr-full.stretched {
    position: relative;
    left: -1em;
}

.tmblr-full.stretched img {
    width: 100%;
}

.tmblr-full.stretched .tmblr-attribution {
    margin: 0 1em;
    font-size: 0.6875rem; // 11px
}

.tmblr-full.stretched .tmblr-attribution .icon-link-ext:before {
    margin-right: 0.1875rem; // 3px
    vertical-align: middle;
}

/* ============
    Photo Post
   ============ */

.post-photo {
    width: 100%;
}

.tmblr-lightbox .lightbox-image {
    max-width: none;
}

.post:not(.photoset-post) .post-photo,
.photoset-row:first-child.columns-1 .photo-link {
    @include border-radius(4px 4px 0 0);
}

.photoset-row:first-child:not(.columns-1) .photo-link:first-child {
    @include border-radius(4px, top-left);
}
.photoset-row:first-child:not(.columns-1) .photo-link:last-child {
    @include border-radius(4px, top-right);
}

/* ============
    Quote Post
   ============ */

.quote-container {
    padding: 0;
    border-width: 0;
    margin-top: 0;
}

.the-quote {
    margin: 0 0.8125rem 0.8125rem; // 13px
    line-height: 125%;
}

.quote-container.short .the-quote {
    font-size: 1.25rem; // 20px
}
.quote-container.medium .the-quote {
    font-size: 1rem; // 16px
}
.quote-container.long .the-quote {
    font-size: 0.875rem; // 14px
    line-height: 150%;
}

.the-quote p:first-child {
    margin-top: 0;
}

.post-body .quote-source {
    font-family: inherit;
    font-size: inherit;
    font-style: normal;
}

/* ===========
    Link Post
   =========== */

.link-container {
    display: block;
    padding: 1em 0;
    background-color: transparent;

    //@include transition(background-color);
    @include border-radius(4px 4px 0 0);
}
.link-container.has-thumbnail {
    padding-top: 0;
}

.link-container:not(.has-thumbnail) .link-name {
    margin-top: 0;
}
.link-name:after {
    vertical-align: bottom;
    margin-left: 0.625rem; // 10px
}

.link-excerpt {
    margin: 0 1em;
    //@include transition(border-color);
}
.link-excerpt .the-excerpt {
    font-size: 0.75rem; // 12px
    line-height: 150%;
    margin-bottom: 0;
}

.type-link .post-body {
    border-top: 1px solid #eee;
    margin-top: 1em;
}

/* ===========
    Chat Post
   =========== */

.chat-container {
    margin-top: 0;
}

.chat-title {
    margin-bottom: 0;
}

.chat-line {
    padding: 1em;
}

.line-label {
    float: left;
    width: 20%;
    word-wrap: break-word;
}

.chat-line.has-label .line-text {
    float: left;
    width: 80%;
    padding-left: 0.3125rem; // 5px
    @include border-box-sizing;
}

/* ============
    Audio Post
   ============ */

.type-audio .post-content {
    position: relative;
}

.album,
.index .audio-container .caption {
    display: none;
}

.audio-info {
    padding: 1em 1em 0;
    min-height: 71px;
}
.index .audio-info {
    margin-bottom: 1em;
}

.audio-info .the-info {
    vertical-align: middle;
    min-height: 71px;
    padding-left: 84px;
    opacity: 0;
}

.track-name {
    font-size: 1.063rem; // 17px
    line-height: 115%;
    margin: 0;
}

.artist {
    font-size: 0.6875rem; // 11px
    margin: 0.125rem 0 0; // 2px
}

.album-art {
    position: absolute;
    top: 1em;
    left: 1em;
    width: 71px;
    height: 71px;
}

.audio-player {
    width: 27px;
    height: 27px;
    padding: 10px;
    position: absolute;
    top: 25px;
    left: 25px;
    background-color: #fff;
    opacity: 0.7;
}

/* =============
    Answer Post
   ============= */

.question-container,
.answer-container {
    margin: 0 1em;
    position: relative;
}
.answer-container {
    margin-top: 1em;
    padding-top: 1em;
}

.asker-portrait,
.answerer-portrait {
    width: 40px;
    height: 40px;
    position: absolute;
    top: 0;
    left: 0;
}
.answerer-portrait {
    top: 1em;
}

.question-author,
.answer-author {
    font-size: 0.875rem; // 14px
    text-transform: lowercase;
    line-height: 100%;
    height: 40px;
    padding: 0.8125rem 0 0 50px; // 13px
    @include border-box-sizing;
}

.asker, .answerer {
    font-weight: normal;
}

.question {
    margin-top: 1em;
    padding-bottom: 1em;
}

.answer-container,
.type-answer .post-body {
    border-top: 1px solid #eee;
}
.type-answer .post-body:empty {
    border-top-width: 0;
}

/* =======
    Pages
   ======= */

.page-content .lightcaps {
    font-weight: normal;
    font-size: 0.75rem; // 12px
    line-height: 125%;
}

.page-content .lightcaps small {
    font-size: 0.625rem; // 10px
    letter-spacing: 1px;
}

/* ===========
    Post Meta
   =========== */

.index .post-aside,
.post-footer {
    padding: 1em 1em 0;
}

.permalink .post-aside {
    position: fixed;
    top: $blog-header-height;
    width: $post-aside-width;
    margin-left: $permalink-post-width + $post-lr-padding;
}

// Begin Post Date
.post-date {
    font-size: px2rem(11px);
}

.index .post-date {
    line-height: px2rem(11px);
    text-transform: lowercase;
    float: left;
    max-width: 18%;
}

.permalink .post-date {
    line-height: 150%;
}
// End Post Date

// Begin Post Tags
.tags {
    line-height: 150%;
    text-transform: lowercase;
}

.index {
    .tags {
        font-size: px2rem(9px);
        float: left;
        margin: 0;
        padding-left: 20px;
        max-width: 77%;
        position: relative;
        @include border-box-sizing;

        &:before {
            content: '/';
            position: absolute;
            left: 8px;
            font-size: px2rem(11px);
        }
    }
    .has-external-audio .tags {
        max-width: 71%;
    }

    .tag {
        float: left;
        padding-right: px2rem(5px);
    }
}

.permalink .tags {
    font-size: px2rem(10px);
}
// End Post Tags

// Begin Post Icons
.index .post-icons {
    float: right;
    margin: 0;
    font-size: px2rem(11px);
    line-height: px2rem(11px);
}

.permalink {
    .post-icons {
        display: none;
        font-size: px2rem(10px);
        line-height: 150%;
        text-transform: lowercase;
    }
    .post.type-audio .post-icons {
        display: block;
    }

    .play-count:before {
        margin-right: 6px;
    }
    .external-audio:before {
        content: '/';
        margin-left: 3px;
    }
}

.index .external-audio,
.like-button,
.reblog-button {
    float: right;
    text-align: right;
    padding-left: 0.25rem; // 4px
}
.like-button {
    width: 0.8125rem; // 13px
    padding-left: 0.125rem; // 2px
    position: relative;
}
.reblog-button {
    padding-left: 0;
}

.post-icon {
    display: block;
    height: 0.6875rem; // 11px
}
.like-icon {
    visibility: hidden;
    @include transition(color);
}

/*
Custom Like Button
ref: http://stackoverflow.com/a/21715659/954677
*/
.like_button {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
    width: 11px;
    height: 11px;
    line-height: 11px;
    cursor: pointer;
    opacity: 0;
    display: none;
}
.like_button iframe {
    position: relative;
    top: -3px;
}

.like_button.liked + .like-icon {
    color: #d75f45 !important;
}
.like_button.liked + .like-icon:before {
    content: '\e813'; // icon-heart-filled
    position: relative;
    right: 0.0625rem; // 1px
}
// End Post Icons

// Begin Post Sources
.post-sources {
    font-size: px2rem(10px);
    line-height: 150%;
}

.submission {
    text-transform: lowercase;
    &:before {
        vertical-align: middle;
        margin-right: 3px;
    }
}

.via:after {
    content: '/';
    margin-right: 5px;
}
// End Post Sources

// Begin Notes Section
.note-count {
    margin-top: 0;
    padding-top: 1em;
    border-top: 1px solid #eee;
}

.notes {
    margin: 0;
    font-size: 0.75rem; // 12px
}

.notes .avatar_frame {
    display: none;
}

.notes blockquote {
    margin: 0.5em 0;
}

.more_notes_link_container {
    font-size: 0.625rem; // 10px
    line-height: inherit;
}
// End Notes Section

/* ==========================================================================
    Footer Styles
   ========================================================================== */

.pagination {
    margin: 0;
}

.previous, .next {
    position: fixed;
    top: 50%;
}

.previous {
    left: 20px;
    text-align: left;
}

.next {
    right: 20px;
    text-align: right;
}


// #day-pagination {
//     margin: 0 20px;
//     text-transform: lowercase;
// }
//
// #prev-day {
//     float: left;
//     width: 50%;
// }
//
// #next-day {
//     float: right;
//     width: 50%;
//     text-align: right;
// }

/* =========
    Buttons
   ========= */

#spinner, #elevator, #theme-credit {
    position: fixed;
    bottom: 20px;
    right: 20px;
}

// @-moz-keyframes spin {
//     from { -moz-transform: rotate(0deg); }
//     to   { -moz-transform: rotate(360deg); }
// }
// @-webkit-keyframes spin {
//     from { -webkit-transform: rotate(0deg); }
//     to   { -webkit-transform: rotate(360deg); }
// }
// @keyframes spin {
//     from { transform: rotate(0deg); }
//     to   { transform: rotate(360deg); }
// }
//
// #spinner {
//     bottom: 5.25rem; // 52px + 29px (#elevator) + 3px = 84px
//     opacity: 0;
//     @include transition(bottom 0.4s, opacity 0.4s);
// }
// #spinner.spin {
//     opacity: 1;
//     cursor: progress;
//     -webkit-animation: spin 2s linear infinite;
//     -moz-animation: spin 2s linear infinite;
//     -o-animation: spin 2s linear infinite;
//     animation: spin 2s linear infinite;
// }

#elevator {
    opacity: 0;

    &.visible {
        opacity: 1;
        bottom: px2rem(20px + $badge-width-height + 3px);
    }

    &.icon-up-bold:before {
        position: relative;
        top: px2rem(-2px);
    }
}

#theme-credit:hover {
    color: #d75f45 !important;
    &:before {
        content: '\e813'; // icon-heart-filled
        position: relative;
        left: px2rem(1px);
    }
}

/* ==========================================================================
    Media Queries
   ========================================================================== */
